<div id="id-container"></div>
<script id="template2.html" type="text/html">
{js var len = list.length;}
{include header.html mlen=len lenStr="lenStr"}
{require header2.html}
</script>
<script id="template.html" type="text/html">
Demo
{js var i = 0}
{js var len = list.length}
{include header.html len=len lenStr="lenStr"}
<ul>
{for (; i < len; i ++)}
  <li {if (i%2 === 0)} class="even"{else} class="odd"{/if}>
    {include item.html item=list[i]}
  </li>
{/for}
</ul>
<div>
{js var m = 12;}
{if (m > 1000)}
  {m}
{else if (m >= 100)}
  {'0' + m}
{elseif (m >= 10)}
  {'00' + m}
{else}
  {'000' + m}
{/if}
</div>
<p>1 - 100</p>
</script>
<script id="header.html" type="text/html">
<h1>{header}</h1>
<p>{lenStr}:{mlen}</p>
<h2>{this.author}</h2>
</script>
<script id="header2.html" type="text/html">
<h1>{header}</h1>
<h2>{this.author}</h2>
</script>
<script id="item.html" type="text/html">
<span>{item}</span>
</script>
<script>
var module = {};
function require(){}
</script>
<script src="../tpl.js"></script>
<script>
Valley.getFileContent = function(template) {
  return new Promise(function(resolve, reject){
    var script = document.getElementById('' + template);
    resolve(script.innerText);
  });
};
Valley.tplPath = '';

function test1(data, scope) {
  // var tplId = 'template2.html';
  return Valley.vtpl('template2.html', data, scope);
}

function runTest(callback) {
  var data = {
    header: 'search list',
    list: ['baidu', 'sogou', '360', 'google']
  };
  var scope = {
    author: 'gutianyu'
  };
  var res = callback(data, scope);
  var fname = callback.fname;
  if (res.then) {
    res.then(function(html){
      console.log(fname, html);
    });
  } else {
    console.log(fname, res);
  }
}

window.onload = function() {
  runTest(test1);
};
</script>
